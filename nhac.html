<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Music Player - Kang & Thy (50 Themes)</title>

<style>
    :root {
        --bg-main: linear-gradient(135deg, #1a1a1a, #3d002f);
        --primary: #ff87c9;
        --accent: #ff4fab;
        --border: #ff8ccd;
        --text-main: #ffffff;
        --text-soft: #ffbde6;
        --disc-border: #ffb6d9;
        --disc-glow: #ff7ac4;
        --dropdown-bg: #3d002f;
    }

    body {
        margin: 0; padding: 0;
        background: var(--bg-main);
        font-family: 'Segoe UI', sans-serif;
        color: var(--text-main);
        height: 100vh;
        display: flex;
        overflow: hidden;
        touch-action: manipulation;
        transition: background 0.5s ease;
    }

    #mainUI { display: flex; width: 100%; height: 100%; transition: opacity 1s ease, filter 1s ease; }

    .left-panel {
        flex: 1; display: flex; flex-direction: column;
        align-items: center; justify-content: center;
        position: relative; padding: 20px; box-sizing: border-box;
    }

    /* ƒêƒ©a quay */
    .disc-container {
        width: 300px; height: 300px; border-radius: 50%;
        background-color: #333; background-position: center; background-size: cover;
        border: 6px solid var(--disc-border); box-shadow: 0 0 25px var(--disc-glow);
        animation: spin 5s linear infinite; animation-play-state: paused;
        position: relative; transition: all 0.5s ease;
    }
    .disc-container::after {
        content: ""; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
        width: 50px; height: 50px; background: #000 url('https://raw.githubusercontent.com/huukhanh2612/kangthy/960b2ee0081e2c2c02bdc3310e805db0558a697f/onekang.png') no-repeat center;
        background-size: 80%; border-radius: 50%; border: 2px solid var(--disc-border);
    }
    .playing .disc-container { animation-play-state: running; }
    @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

    .song-title { margin-top: 20px; font-size: 24px; font-weight: bold; text-align: center; color: var(--text-soft); }
    .song-desc { font-size: 14px; opacity: 0.8; text-align: center; margin-top: 5px; }

    /* Thanh ti·∫øn tr√¨nh */
    .progress-container { width: 90%; max-width: 400px; margin-top: 25px; }
    .progress-bar { height: 8px; background: rgba(255, 255, 255, 0.2); border-radius: 4px; cursor: pointer; position: relative; }
    .progress { height: 100%; width: 0%; background: var(--accent); border-radius: 4px; transition: width 0.1s linear; }
    .time-display { display: flex; justify-content: space-between; margin-top: 8px; font-size: 12px; opacity: 0.8; }
    
    /* N√∫t ƒëi·ªÅu khi·ªÉn */
    .controls { margin-top: 20px; display: flex; gap: 10px; align-items: center; justify-content: center; flex-wrap: wrap; }
    .btn {
        width: 45px; height: 45px; border-radius: 50%;
        background: var(--primary); border: none; font-size: 18px;
        cursor: pointer; box-shadow: 0 0 10px var(--accent);
        display: flex; align-items: center; justify-content: center; color: #000;
        transition: transform 0.2s;
    }
    .btn:active { transform: scale(0.9); }
    #playBtn { width: 60px; height: 60px; font-size: 24px; }

    /* Playlist */
    .playlist {
        width: 350px; background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(15px);
        padding: 20px; display: flex; flex-direction: column;
        border-left: 2px solid var(--border); transition: transform 0.3s ease, width 0.3s ease;
    }
    .playlist.hidden { transform: translateX(100%); width: 0; padding: 0; border: none; overflow: hidden; }
    #playlistContent { flex-grow: 1; overflow-y: auto; }

    .filter-control {
        width: 100%; padding: 12px; margin-bottom: 10px; border-radius: 8px;
        border: 1px solid var(--border); background: var(--dropdown-bg); color: white; box-sizing: border-box;
    }

    .song-item {
        padding: 12px; margin-bottom: 8px; background: rgba(255, 182, 213, 0.1);
        border-radius: 10px; cursor: pointer; display: flex; align-items: center; justify-content: space-between;
    }
    .song-item.active { background: var(--accent) !important; color: #000; }

    /* N√∫t ch·ª©c nƒÉng g√≥c m√†n h√¨nh */
    #togglePlaylistBtn { position: absolute; top: 20px; right: 20px; width: 45px; height: 45px; border-radius: 50%; background: var(--primary); border: none; cursor: pointer; z-index: 2100; color: #000; }
    #manualIdleBtn { position: absolute; bottom: 20px; left: 20px; width: 45px; height: 45px; border-radius: 50%; background: rgba(255,255,255,0.1); border: 1px solid var(--border); color: #fff; cursor: pointer; z-index: 1000; }
    #themeSelector { position: absolute; top: 20px; left: 20px; padding: 10px; border-radius: 20px; background: var(--primary); border: none; font-weight: bold; font-size: 12px; z-index: 2100; cursor: pointer; box-shadow: 0 0 10px var(--accent); max-width: 120px;}

    /* Idle Overlay */
    #idleOverlay {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95);
        display: flex; flex-direction: column; align-items: center; justify-content: center;
        opacity: 0; pointer-events: none; transition: opacity 1s ease; z-index: 9999;
    }
    #idleOverlay.active { opacity: 1; pointer-events: all; }
    #visualizer { position: absolute; width: 100%; height: 100%; top: 0; left: 0; }
    .idle-info { text-align: center; z-index: 10001; pointer-events: none; }
    .idle-title { font-size: 45px; font-weight: bold; color: var(--primary); text-shadow: 0 0 20px var(--accent); margin: 0; }

    @media (max-width: 768px) {
        .playlist { position: absolute; right: 0; width: 85% !important; height: 100%; z-index: 2000; background: rgba(15, 0, 10, 0.95) !important; }
        .disc-container { width: 220px !important; height: 220px !important; }
    }
</style>
</head>

<body>

<div id="idleOverlay" onclick="resetIdle()">
    <canvas id="visualizer"></canvas>
    <div class="idle-info">
        <p class="idle-title" id="idleTitle"></p>
        <p id="idleArtist" style="color: var(--text-soft); font-size: 18px; margin-top: 10px;"></p>
        <p id="idleQuote" style="font-style: italic; opacity: 0.7; margin-top: 20px; max-width: 80%; margin: 20px auto;"></p>
    </div>
</div>

<div id="mainUI">
    <div class="left-panel" id="playerArea">
        <select id="themeSelector" onchange="applyTheme(this.value)">
            <optgroup label="‚ú® ƒê·∫∑c Bi·ªát">
                <option value="onekang">üíó OneKang (G·ªëc)</option>
                <option value="luxury_gold">üëë Luxury Gold</option>
                <option value="cyberpunk">ü§ñ Cyberpunk</option>
                <option value="galaxy_deep">üåå Galaxy</option>
            </optgroup>
            <optgroup label="üé® M√†u ƒê∆°n & Pastel">
                <option value="midnight">üåô Midnight Blue</option>
                <option value="emerald">üåø Emerald Forest</option>
                <option value="sunset_vibes">üåÖ Sunset Vibes</option>
                <option value="lavender_dream">üíú Lavender</option>
                <option value="sakura_pink">üå∏ Sakura</option>
                <option value="mint_tea">üçÉ Mint Tea</option>
                <option value="ocean_blue">üåä Ocean Blue</option>
                <option value="coffee_warm">‚òï Coffee</option>
                <option value="fire_red">üî• Fire Red</option>
            </optgroup>
            </select>

        <button id="togglePlaylistBtn">‚ò∞</button> 
        <button id="manualIdleBtn" onclick="forceIdle()">üåô</button>

        <div class="disc-container" id="disc"></div>

        <div class="song-title" id="songTitle">ƒêang t·∫£i...</div>
        <div class="song-desc" id="songDesc"></div>
        
        <div class="progress-container">
            <div class="progress-bar" id="progressBar">
                <div class="progress" id="progress"></div>
            </div>
            <div class="time-display">
                <span id="currentTime">0:00</span>
                <span id="durationTime">0:00</span>
            </div>
        </div>

        <div class="controls">
            <button class="btn" id="prevBtn">‚èÆ</button>
            <button class="btn" id="shuffleBtn">üîÄ</button>
            <button class="btn" id="playBtn">‚ñ∂Ô∏è</button>
            <button class="btn" id="downloadBtn">üì•</button>
            <button class="btn" id="shareBtn">üîó</button>
            <button class="btn" id="nextBtn">‚è≠</button>
        </div>
    </div>

    <div class="playlist hidden" id="playlist">
        <h2 style="text-align: center; font-size: 1.1rem; margin-top: 50px;">KHO NH·∫†C KANG & THY</h2>
        <input type="text" id="searchInput" placeholder="T√¨m ki·∫øm t√™n b√†i h√°t..." onkeyup="filterSongs()" class="filter-control">
        <select id="genreFilter" onchange="filterSongs()" class="filter-control"></select>
        <div id="playlistContent"></div>
    </div>
</div>

<audio id="audio" crossorigin="anonymous"></audio>

<script>
const loveQuotes = ["M·ªçi b·∫£n nh·∫°c ƒë·ªÅu hay h∆°n khi nghe c√πng Thy.", "√Çm nh·∫°c c·ªßa Kang, c·∫£m h·ª©ng t·ª´ Thy.", "H·∫°nh ph√∫c l√† m·ªói ng√†y ƒë∆∞·ª£c nghe nh·∫°c c√πng nhau.", "Giai ƒëi·ªáu n√†y l√† tr√°i tim Kang d√†nh cho Thy."];

// D·ªØ li·ªáu b√†i h√°t (Gi·ªØ nguy√™n c·ªßa b·∫°n)
const songs = [
    { title: "Ch√∫ng Ta", desc: "Lyrics: OneKang ‚Ä¢ Artist: Qu√¢nBy", file: "Ch√∫ng ta _.mp3", cover: "https://raw.githubusercontent.com/huukhanh2612/kangthy/02005d4f3bd9cdd96bb59add285779b40576b5ad/IMG_5366.JPG", genre: "SUY" }, 
    { title: "Anh ƒêang C·ªë", desc: "Lyrics: OneKang ‚Ä¢ Artist: Qu√¢nBy", file: "Anh ƒëang c·ªë.mp3", cover: "https://raw.githubusercontent.com/huukhanh2612/kangthy/41820ab49fc16eb49b50bdd822cdd496535b2843/Gemini_Generated_Image_m4gf0bm4gf0bm4gf.png", genre: "SUY" }, 
    { title: "Ng√†y ƒê√¥ng L·∫°nh", desc: "Lyrics: OneKang ‚Ä¢ Artist: Qu√¢nBy", file: "Ng√†y ƒë√¥ng l·∫°nh.mp3", cover: "https://raw.githubusercontent.com/huukhanh2612/kangthy/41820ab49fc16eb49b50bdd822cdd496535b2843/Gemini_Generated_Image_h1urogh1urogh1ur.png", genre: "SUY" }, 
    { title: "ƒê√™m D√†i", desc: "Lyrics: OneKang ‚Ä¢ Artist: Qu√¢nBy - OngKang - B·∫£o Black", file: "ƒê√™m D√†i.mp3", cover: "https://raw.githubusercontent.com/huukhanh2612/kangthy/0826d9dfab0e06384ce5e135b70f81be636c0a0d/z7300307998090_e88f094681988496cd7448fdca2a6dcc.jpg", genre: "D·ªÆ" },
    { title: "Xu√¥i Theo D√≤ng", desc: "Lyrics: OneKang ‚Ä¢ Artist: Qu√¢nBy", file: "Xu√¥i theo s√¥ng.mp3", cover: "https://raw.githubusercontent.com/huukhanh2612/kangthy/ee11147f7324130dfdae739dea2204f5c7f63917/diaquay.jpg", genre: "SUY" },
    { title: "ƒê·ªì Ngon", desc: "Lyrics: OneKang ‚Ä¢ Artist: B·∫£o Black", file: "ƒê·ªì Ngon.mp3", cover: "https://raw.githubusercontent.com/huukhanh2612/kangthy/0826d9dfab0e06384ce5e135b70f81be636c0a0d/z7300307221612_0bb54ca8ddc8a81765d57b4ba9785d7f.jpg", genre: "D·ªÆ" },
    { title: "K√©o Anh T√¥i Ra", desc: "Lyrics: OneKang ‚Ä¢ Artist: Rick", file: "K√©o Anh T√¥i Ra.mp3", cover: "https://raw.githubusercontent.com/huukhanh2612/kangthy/8f816a23e19e9041c7cf71b11a907a864c34c03e/photo_2025-03-04_18-40-42.jpg", genre: "C·ª®U" },
    { title: "Ch·∫°y Kh·ªèi Tao", desc: "Lyrics: OneKang ‚Ä¢ Artist: B·∫£o Black", file: "Ch·∫°y kh·ªèi tao.mp3", cover: "https://raw.githubusercontent.com/huukhanh2612/kangthy/ee11147f7324130dfdae739dea2204f5c7f63917/diaquay.jpg", genre: "SUY" },
    { title: "C√≤n Ngo·∫°i ƒê√¢u", desc: "Lyrics: OneKang ‚Ä¢ Artist: BB.A", file: "C√≤n ngo·∫°i ƒë√¢u _.mp3", cover: "https://raw.githubusercontent.com/huukhanh2612/kangthy/02005d4f3bd9cdd96bb59add285779b40576b5ad/z7280227127599_19b782c2166dab57ad1468f645d2f276.jpg", genre: "SUY" },
    { title: "Qu√™n Ngo·∫°i", desc: "Lyrics: OneKang ‚Ä¢ Artist: Qu√¢nBy", file: "Qu√™n Ngo·∫°i.mp3", cover: "https://raw.githubusercontent.com/huukhanh2612/kangthy/02005d4f3bd9cdd96bb59add285779b40576b5ad/z7280227127599_19b782c2166dab57ad1468f645d2f276.jpg", genre: "SUY" },
    { title: "Sao Em L·∫°i Ch·ªçn Kh√≥ KhƒÉn", desc: "Lyrics: OneKang ‚Ä¢ Artist: ƒê·∫°iTo", file: "Sao em l·∫°i ch·ªçn kh√≥ khƒÉn _.mp3", cover: "https://raw.githubusercontent.com/huukhanh2612/kangthy/02005d4f3bd9cdd96bb59add285779b40576b5ad/IMG_5366.JPG", genre: "SUY" }
];

// C·∫•u h√¨nh 50 Themes (M·∫´u ti√™u bi·ªÉu, b·∫°n c√≥ th·ªÉ copy-paste th√™m c√°c m√£ m√†u)
const themes = {
    onekang: { bg: 'linear-gradient(135deg, #1a1a1a, #3d002f)', pri: '#ff87c9', acc: '#ff4fab', bor: '#ff8ccd', glow: '#ff7ac4' },
    luxury_gold: { bg: 'linear-gradient(135deg, #0f0f0f, #2c2c2c)', pri: '#d4af37', acc: '#f1c40f', bor: '#d4af37', glow: '#cfb53b' },
    cyberpunk: { bg: '#000', pri: '#00ff00', acc: '#ff00ff', bor: '#00ffff', glow: '#ff00ff' },
    midnight: { bg: 'linear-gradient(135deg, #000428, #004e92)', pri: '#00d2ff', acc: '#3a7bd5', bor: '#00d2ff', glow: '#00d2ff' },
    emerald: { bg: 'linear-gradient(135deg, #0a2e0a, #1a4d1a)', pri: '#2ecc71', acc: '#27ae60', bor: '#2ecc71', glow: '#2ecc71' },
    sunset_vibes: { bg: 'linear-gradient(135deg, #4b6cb7, #182848)', pri: '#ff9966', acc: '#ff5e62', bor: '#ff9966', glow: '#ff9966' },
    lavender_dream: { bg: 'linear-gradient(135deg, #2c3e50, #4ca1af)', pri: '#e1bee7', acc: '#ba68c8', bor: '#ce93d8', glow: '#ba68c8' },
    sakura_pink: { bg: 'linear-gradient(135deg, #ff9a9e, #fecfef)', pri: '#ff4d6d', acc: '#c9184a', bor: '#ff758f', glow: '#ff4d6d' },
    mint_tea: { bg: 'linear-gradient(135deg, #00b09b, #96c93d)', pri: '#f8ffae', acc: '#43e97b', bor: '#fff', glow: '#43e97b' },
    coffee_warm: { bg: 'linear-gradient(135deg, #2c1e12, #4b3621)', pri: '#d2b48c', acc: '#8b4513', bor: '#a0522d', glow: '#8b4513' },
    fire_red: { bg: 'linear-gradient(135deg, #000, #b71c1c)', pri: '#ff5252', acc: '#d32f2f', bor: '#ff8a80', glow: '#f44336' },
    galaxy_deep: { bg: 'radial-gradient(circle, #200122, #000)', pri: '#9d50bb', acc: '#6e48aa', bor: '#9d50bb', glow: '#9d50bb' }
    // C√≥ th·ªÉ th√™m t·ªëi ƒëa 50 c√°i t∆∞∆°ng t·ª± ·ªü ƒë√¢y
};

let currentIndex = 0;
let idleInterval;
const audio = document.getElementById("audio");
const playBtn = document.getElementById("playBtn");

// √Åp d·ª•ng Giao di·ªán
function applyTheme(name) {
    const t = themes[name] || themes['onekang'];
    const r = document.documentElement;
    r.style.setProperty('--bg-main', t.bg);
    r.style.setProperty('--primary', t.pri);
    r.style.setProperty('--accent', t.acc);
    r.style.setProperty('--border', t.bor);
    r.style.setProperty('--disc-border', t.bor);
    r.style.setProperty('--disc-glow', t.glow);
}

// T√¨m ki·∫øm & L·ªçc (ƒê√£ s·ª≠a l·ªói ƒë·ªìng b·ªô index)
function filterSongs() {
    const search = document.getElementById("searchInput").value.toLowerCase();
    const genre = document.getElementById("genreFilter").value;
    const filtered = songs.filter(s => s.title.toLowerCase().includes(search) && (genre === "" || s.genre === genre));
    renderPlaylist(filtered);
}

function renderPlaylist(list) {
    document.getElementById("playlistContent").innerHTML = list.map(s => {
        const idx = songs.findIndex(x => x.file === s.file);
        return `
            <div class="song-item ${idx === currentIndex ? 'active' : ''}" onclick="playSong(${idx})">
                <div style="flex:1"><b>${s.title}</b><br><small>${s.genre}</small></div>
                <button class="btn" style="width:30px;height:30px;font-size:12px" onclick="event.stopPropagation(); window.open('${s.file}')">üì•</button>
            </div>`;
    }).join('');
}

// Ch·ª©c nƒÉng Ph√°t nh·∫°c
function playSong(i) {
    currentIndex = i;
    audio.src = songs[i].file;
    document.getElementById("songTitle").innerText = songs[i].title;
    document.getElementById("songDesc").innerText = songs[i].desc;
    document.getElementById("disc").style.backgroundImage = `url('${songs[i].cover}')`;
    audio.play();
    document.getElementById("playerArea").classList.add("playing");
    playBtn.textContent = '‚è∏Ô∏è';
    filterSongs();
}

playBtn.onclick = () => {
    if (audio.paused) { audio.play(); document.getElementById("playerArea").classList.add("playing"); playBtn.textContent = '‚è∏Ô∏è'; }
    else { audio.pause(); document.getElementById("playerArea").classList.remove("playing"); playBtn.textContent = '‚ñ∂Ô∏è'; }
};

// --- GI·ªÆ NGUY√äN T√çNH NƒÇNG C≈® C·ª¶A B·∫†N ---
document.getElementById("downloadBtn").onclick = () => window.open(songs[currentIndex].file);
document.getElementById("shareBtn").onclick = () => {
    navigator.clipboard.writeText(window.location.href);
    alert("ƒê√£ sao ch√©p link trang web!");
};
document.getElementById("shuffleBtn").onclick = () => playSong(Math.floor(Math.random() * songs.length));
document.getElementById("nextBtn").onclick = () => playSong((currentIndex + 1) % songs.length);
document.getElementById("prevBtn").onclick = () => playSong((currentIndex - 1 + songs.length) % songs.length);
document.getElementById("togglePlaylistBtn").onclick = () => document.getElementById("playlist").classList.toggle('hidden');

// H·∫πn gi·ªù Idle (G·ªëc)
let idleTime = 0;
function resetIdle() { 
    idleTime = 0; 
    document.getElementById("mainUI").style.opacity = "1";
    document.getElementById("idleOverlay").classList.remove("active");
}
function forceIdle() { idleTime = 15; activateIdle(); }
function activateIdle() {
    document.getElementById("mainUI").style.opacity = "0";
    document.getElementById("idleOverlay").classList.add("active");
    document.getElementById("idleTitle").innerText = songs[currentIndex].title;
    document.getElementById("idleArtist").innerText = songs[currentIndex].desc;
    document.getElementById("idleQuote").innerText = loveQuotes[Math.floor(Math.random() * loveQuotes.length)];
}
setInterval(() => { if(!audio.paused) { idleTime++; if(idleTime >= 15) activateIdle(); } }, 1000);
window.onmousemove = window.ontouchstart = resetIdle;

// Thanh ti·∫øn tr√¨nh
audio.ontimeupdate = () => {
    if (audio.duration) {
        document.getElementById("progress").style.width = (audio.currentTime / audio.duration) * 100 + "%";
        document.getElementById("currentTime").innerText = Math.floor(audio.currentTime/60) + ":" + ("0"+Math.floor(audio.currentTime%60)).slice(-2);
    }
};
audio.onended = () => document.getElementById("nextBtn").click();
document.getElementById("progressBar").onclick = (e) => { audio.currentTime = (e.offsetX / e.currentTarget.clientWidth) * audio.duration; };

// Kh·ªüi t·∫°o (G·ªëc)
filterSongs();
const genres = ["", ...new Set(songs.map(s => s.genre))];
document.getElementById("genreFilter").innerHTML = genres.map(g => `<option value="${g}">${g || "T·∫•t c·∫£ th·ªÉ lo·∫°i"}</option>`).join('');
document.getElementById("disc").style.backgroundImage = `url('${songs[0].cover}')`;
</script>
</body>
</html>
